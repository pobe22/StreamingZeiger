@model StreamingZeiger.ViewModels.WatchlistViewModel

<h2>Meine Watchlist</h2>

@if (!Model.Movies.Any() && !Model.Series.Any())
{
    <p>Du hast noch keine Medieninhalte in der Watchlist.</p>
}

@if (Model.Movies.Any())
{
    <h3>Filme</h3>
    <ul class="list-group mb-4">
        @foreach (var item in Model.Movies)
        {
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <a asp-controller="Movies" asp-action="Details" asp-route-id="@item.MediaItem.Id">
                    @item.MediaItem.Title
                </a>

                @if (item.MediaItem.MediaGenres != null && item.MediaItem.MediaGenres.Any())
                {
                    <span>
                        @foreach (var mg in item.MediaItem.MediaGenres)
                        {
                            <span class="badge bg-secondary me-1">@mg.Genre.Name</span>
                        }
                    </span>
                }

                <div id="details-@item.MediaItem.Id"></div>

                <a asp-controller="Watchlist"
                   asp-action="Remove"
                   asp-route-mediaItemId="@item.MediaItem.Id"
                   class="btn btn-danger btn-sm">
                    Entfernen
                </a>
            </li>
        }
    </ul>
}

@if (Model.Series.Any())
{
    <h3>Serien</h3>
    <ul class="list-group">
        @foreach (var item in Model.Series)
        {
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <a asp-controller="Series" asp-action="Details" asp-route-id="@item.MediaItem.Id">
                    @item.MediaItem.Title
                </a>

                @if (item.MediaItem.MediaGenres != null && item.MediaItem.MediaGenres.Any())
                {
                    <span>
                        @foreach (var mg in item.MediaItem.MediaGenres)
                        {
                            <span class="badge bg-secondary me-1">@mg.Genre.Name</span>
                        }
                    </span>
                }

                <button onclick="showDetails(@item.MediaItem.Id)" class="btn btn-outline-primary btn-sm">Details anzeigen</button>
                <div id="details-@item.MediaItem.Id"></div>

                <a asp-controller="Watchlist"
                   asp-action="Remove"
                   asp-route-mediaItemId="@item.MediaItem.Id"
                   class="btn btn-danger btn-sm">
                    Entfernen
                </a>
            </li>
        }
    </ul>
}