@model StreamingZeiger.Models.Episode

<div class="container mt-4">
    <div class="row">
        <!-- Poster Thumbnail -->
        @if (!string.IsNullOrEmpty(Model.Season.Series.PosterFile))
        {
            <div class="col-md-3 mb-3">
                <img src="@Model.Season.Series.PosterFile"
                     alt="@Model.Season.Series.Title Poster"
                     class="img-fluid rounded shadow"
                     style="max-height:200px; object-fit:cover;" />
            </div>
        }

        <!-- Episode Info -->
        <div class="col-md-9">
            <h2 class="text-warning">@Model.Title</h2>
            <p class="mb-1"><strong>Serie:</strong> @Model.Season.Series.Title</p>
            <p class="mb-1"><strong>Staffel:</strong> @Model.Season.SeasonNumber | <strong>Episode:</strong> @Model.EpisodeNumber</p>
            <p class="mb-1"><strong>Dauer:</strong> @Model.DurationMinutes Minuten</p>

            @if (!string.IsNullOrEmpty(Model.Description))
            {
                <p class="mt-2">@Model.Description</p>
            }

            <div class="mt-3 d-flex flex-wrap gap-2">
                <a asp-controller="Series" asp-action="Details" asp-route-id="@Model.Season.Series.Id"
                   class="btn btn-sm btn-secondary">Zurück zur Serie</a>

                @if (Model.EpisodeNumber > 1)
                {
                    var prevEpisode = Model.Season.Episodes
                    .FirstOrDefault(e => e.EpisodeNumber == Model.EpisodeNumber - 1);
                    if (prevEpisode != null)
                    {
                        <a asp-controller="Series" asp-action="EpisodeDetails"
                           asp-route-id="@prevEpisode.Id"
                           class="btn btn-sm btn-outline-secondary">← Vorherige</a>
                    }
                }

                @if (Model.EpisodeNumber < Model.Season.Episodes.Count)
                {
                    var nextEpisode = Model.Season.Episodes
                    .FirstOrDefault(e => e.EpisodeNumber == Model.EpisodeNumber + 1);
                    if (nextEpisode != null)
                    {
                        <a asp-controller="Series" asp-action="EpisodeDetails"
                           asp-route-id="@nextEpisode.Id"
                           class="btn btn-sm btn-outline-secondary">Nächste →</a>
                    }
                }

            </div>
        </div>
    </div>
</div>
